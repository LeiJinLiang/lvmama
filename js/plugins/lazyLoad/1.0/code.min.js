(function(e){function a(h){return new RegExp("(^|\\s+)"+h+"(\\s+|$)")}var d,f,g;if("classList" in document.documentElement){d=function(h,i){return h.classList.contains(i)};f=function(h,i){h.classList.add(i)};g=function(h,i){h.classList.remove(i)}}else{d=function(h,i){return a(i).test(h.className)};f=function(h,i){if(!d(h,i)){h.className=h.className+" "+i}};g=function(h,i){h.className=h.className.replace(a(i)," ")}}function b(i,j){var h=d(i,j)?g:f;h(i,j)}var c={hasClass:d,addClass:f,removeClass:g,toggleClass:b,has:d,add:f,remove:g,toggle:b};if(typeof define==="function"&&define.amd){define(c)}else{e.classie=c}})(window);(function(f){var c=f.document.documentElement;var j=[].slice,b={len:0};function h(){var m=c["clientHeight"],n=f["innerHeight"];if(m<n){return n}else{return m}}function k(){return f.pageYOffset||c.scrollTop}function l(n){var m=0,o=0;do{if(!isNaN(n.offsetTop)){m+=n.offsetTop}if(!isNaN(n.offsetLeft)){o+=n.offsetLeft}}while(n=n.offsetParent);return{top:m,left:o}}function a(s,r){var q=s.offsetHeight,p=k(),n=p+h(),m=l(s).top,o=m+q,r=r||0;return(m+q*r)<=n&&(o-q*r)>=p}function g(n,m){for(var o in m){if(m.hasOwnProperty(o)){n[o]=m[o]}}return n}function i(n,m){return n.tagName.toUpperCase()==="IMG"||n.querySelectorAll("*["+m+"]").length>0}function d(m){return m?function(p,n){var o=n.imgEffect+n.effect.replace("effect-","");classie.add(p,o||"shown")}:function(n){classie.add(n,"shown")}}function e(n,m){if(!(this instanceof e)){return new e(n,m)}this.el=n;this.childrens=n.children;this.cLen=n.children.length;this.options=g(this.defaults,m);this._init()}e.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0,scrollFlg:true,resizeFlg:false,animGrid:"_animGrid",animGridEl:"._animGridEl",dataFlg:"data-lazy-url",flg:"lazyUrl",effect:"effect-2",imgEffect:"_animImg-",imgOnly:false,cover:false},_init:function(){var m=this,p=m.options,o;if(!p.imgOnly){classie.add(m.el,p.animGrid);classie.add(m.el,p.effect)}m._addEffect=d(p.imgOnly);m.items=j.call(p.tag?m.el.querySelectorAll(p.tag):m.el.querySelectorAll(p.animGridEl));m.itemsCount=m.items.length;m.itemsRenderedCount=0;m.didScroll=false;if(m.itemsCount===0){o=j.call(m.childrens);p.cover?o.forEach(function(r,q){classie.add(r,"_animGridEl")}):o.forEach(function(r,q){i(r,p.dataFlg)&&classie.add(r,"_animGridEl")});m.items=o;m.itemsCount=o.length}m.items.forEach(function(r,q){if(m.el.style.display!=""&&a(r,m.viewportFactor)){m._checkTotalRendered();classie.add(r,"shown");m._lazyImgLoad(r)}});var n="scroll"+(++e.prototype.appliCount);f[n]=function(){m._onScrollFn()};p.scrollFlg&&f.addEventListener("scroll",f[n],false);p.resizeable&&f.addEventListener("resize",function(){m._resizeHandler()},false);m._onScrollFn();f.onpopstate=function(){for(var q=1;q<=e.prototype.appliCount;q++){f.removeEventListener("scroll",f["scroll"+q],false)}e.prototype.appliCount=0}},_onScrollFn:function(){var m=this;if(!this.didScroll){this.didScroll=true;setTimeout(function(){m._scrollPage()},60)}},appliCount:0,_scrollPage:function(){var m=this;m._checkUpdate();m.items.forEach(function(p,o){if(m.options.effectOnly||!classie.has(p,"shown")&&!classie.has(p,"animate")&&a(p,m.options.viewportFactor)){var n=k()+h()/2;m.el.style.WebkitPerspectiveOrigin="50% "+n+"px";m.el.style.perspectiveOrigin="50% "+n+"px";m._checkTotalRendered();if(m.options.minDuration&&m.options.maxDuration){var q=(Math.random()*(m.options.maxDuration-m.options.minDuration)+m.options.minDuration)+"s";p.style.WebkitAnimationDuration=q;p.style.animationDuration=q}classie.add(p,"animate");m._lazyImgLoad(p)}});this.didScroll=false},_resizeHandler:function(){var m=this;function n(){m._scrollPage();m.resizeTimeout=null}if(this.resizeTimeout){clearTimeout(this.resizeTimeout)}this.resizeTimeout=setTimeout(n,1000)},_checkTotalRendered:function(){++this.itemsRenderedCount;if(this.itemsRenderedCount===this.itemsCount){f.removeEventListener("scroll",this._onScrollFn)}},_lazyImgLoad:function(r){var n=this,p=n.options;var q,o=r.querySelectorAll("*["+p.dataFlg+"]");if(q=r.dataset[p.flg]){m(r,q)}j.call(o).forEach(function(s){q=s.dataset[p.flg];q&&m(s,q)});function m(u,t){if(u.tagName.toUpperCase()=="IMG"){u.setAttribute("src",t);u.onload=function(){n._addEffect(u,p)};return}var s=new Image();s.src=t;s.onload=function(){u.style.backgroundImage="url('"+t+"')";n._addEffect(u,p)};s.onerror=function(){u.style.opacity="1"}}},_checkUpdate:function(){var n=this,m,o=n.childrens.length;if((m=o-n.cLen)>=0){n.items=j.call(n.childrens,-m);n.items.forEach(function(q,p){classie.add(q,"_animGridEl")});n.cLen=o;n.itemsCount=m;n.itemsRenderedCount=0}}};f.AnimOnScroll=e})(window);